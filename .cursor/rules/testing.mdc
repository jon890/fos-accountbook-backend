---
alwaysApply: true
description: í…ŒìŠ¤íŠ¸ ì‘ì„± ê·œì¹™ ë° ì „ëµ
tags: [testing, test, junit, mockito]
version: "1.0"
---

# í…ŒìŠ¤íŠ¸ ì „ëµ

## í†µí•© í…ŒìŠ¤íŠ¸ (Controller)

```java
@SpringBootTest
@AutoConfigureMockMvc
@ExtendWith(DatabaseCleanupExtension.class)  // âœ… í•„ìˆ˜
@DisplayName("ì‚¬ìš©ì í”„ë¡œí•„ ì»¨íŠ¸ë¡¤ëŸ¬ í†µí•© í…ŒìŠ¤íŠ¸")
class UserProfileControllerTest {

    @Autowired private MockMvc mockMvc;
    @Autowired private UserRepository userRepository;

    @Test
    @DisplayName("í”„ë¡œí•„ ì¡°íšŒ - ì„±ê³µ")
    void getProfile_Success() throws Exception {
        // Given: ì‹¤ì œ DBì— ë°ì´í„° ìƒì„±
        User user = userRepository.save(createUser());

        // When: API í˜¸ì¶œ (ì‹¤ì œ ì»¤ë°‹ ë°œìƒ)
        mockMvc.perform(get("/api/users/me/profile")
                .contentType(MediaType.APPLICATION_JSON))
            .andExpect(status().isOk())
            .andExpect(jsonPath("$.data.userUuid").value(user.getUuid().getValue()));

        // Then: DB ìƒíƒœ ê²€ì¦
        assertThat(userRepository.findByUuid(user.getUuid())).isPresent();
    }
    // DatabaseCleanupExtensionì´ ìë™ìœ¼ë¡œ í…Œì´ë¸” ì •ë¦¬
}
```

## í•µì‹¬ ì›ì¹™

- âœ… **@SpringBootTest ì‚¬ìš©** (ì‹¤ì œ Spring ì»¨í…ìŠ¤íŠ¸)
- âœ… **ì‹¤ì œ Bean ì‚¬ìš©** (Service, Repository ëª¨ë‘ ì‹¤ì œ)
- âœ… **ì‹¤ì œ DB ì‚¬ìš©** (H2 í…ŒìŠ¤íŠ¸ DB)
- âœ… **ì™¸ë¶€ APIë§Œ ëª¨í‚¹** (ìš°ë¦¬ê°€ ì œì–´ ë¶ˆê°€ëŠ¥í•œ ê²ƒë§Œ)
- âœ… **@ExtendWith(DatabaseCleanupExtension.class)** í•„ìˆ˜
- âŒ **@Transactional ì‚¬ìš© ê¸ˆì§€** (ì‹¤ì œ ì»¤ë°‹ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´)

---

## ğŸ“ ì»¤ë°‹ ê·œì¹™

- **ì‹ ê·œ ì½”ë“œ = í…ŒìŠ¤íŠ¸ í•„ìˆ˜**
  - Controller ì¶”ê°€ â†’ í†µí•© í…ŒìŠ¤íŠ¸ ì¶”ê°€
  - Service ì¶”ê°€ â†’ ë‹¨ìœ„/í†µí•© í…ŒìŠ¤íŠ¸ ì¶”ê°€
  - Repository ì¶”ê°€ â†’ í…ŒìŠ¤íŠ¸ ì¶”ê°€

- **ì»¤ë°‹ ì „ í™•ì¸**
  ```bash
  ./gradlew test  # ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
  ```
