# ============================================
# 공통 설정 (모든 프로파일에 적용)
# ============================================
# Profile별 설정 파일:
#   - application-local.yml (로컬 개발)
#   - application-prod.yml (Railway 프로덕션)
#   - application-test.yml (테스트)

server:
  port: ${PORT:8080}
  servlet:
    context-path: /api/v1

spring:
  application:
    name: fos-accountbook-backend
  
  # 데이터베이스 설정 (Profile별로 설정)
  # - application-local.yml: 로컬 MySQL 직접 설정
  # - application-prod.yml: Railway MySQL 환경변수 사용
  
  # JPA 공통 설정
  jpa:
    hibernate:
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQLDialect
    open-in-view: false
  
  # Flyway 공통 설정
  flyway:
    baseline-on-migrate: true
    baseline-version: 0
    locations: classpath:db/migration
    validate-on-migrate: true
  
  # Security 설정
  security:
    filter:
      dispatcher-types: async, error, request

# JWT 설정 (백엔드 자체 JWT + NextAuth 세션 검증 공통 사용)
# AUTH_SECRET: 프론트엔드와 동일한 비밀키 사용 (npx auth secret으로 생성)
jwt:
  secret: ${AUTH_SECRET}
  expiration: ${JWT_EXPIRATION:86400000}        # 기본 24시간 (밀리초)
  refresh-expiration: ${JWT_REFRESH_EXPIRATION:604800000}  # 기본 7일 (밀리초)

# NextAuth 설정 (Auth.js 세션 검증용) - JWT와 동일한 SECRET 사용
nextauth:
  secret: ${AUTH_SECRET}

# SpringDoc OpenAPI 공통 설정
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    tags-sorter: alpha
    operations-sorter: alpha
    display-request-duration: true
    disable-swagger-default-url: true

# 로깅은 logback-spring.xml에서 Profile별로 관리
